<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Groupjs by mainnote</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Groupjs</h1>
      <h2 class="project-tagline">GroupJS is an implementation pattern of grouping objects for inheritance and implementation.</h2>
      <a href="https://github.com/mainnote/groupJS" class="btn">View on GitHub</a>
      <a href="https://github.com/mainnote/groupJS/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/mainnote/groupJS/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p align="center">
  <img src="https://github.com/mainnote/groupJS/blob/master/logo.png" alt="groupJS logo">
</p>

<h3>
<a id="about-groupjs" class="anchor" href="#about-groupjs" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>About groupJS</h3>

<p>GroupJS is an implementation pattern of grouping objects for so-called "instances" purpose. Instead of putting all attributes in a single object, it is recommended to create an object as a group object to manage and connect other objects called members. In the group object, there is a member list to maintain the relationship between group object and its members. Group object acts as a communicator between members. It also provides a single interface outside the group. Thus, object gets its own freedom of evolving its function without changing interaction of another object (class). </p>

<h3>
<a id="why-do-i-need-groupjs" class="anchor" href="#why-do-i-need-groupjs" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Why do I need groupJS</h3>

<p>(As you may already know that javascript takes prototypal inheritance, it creates flexible programming style. However, I am not a big fans of coding with .prototype. all the time (say composition). This method drains up my brain. Thus, I started looking for an implementation pattern fitting myself. </p>

<p>At first I jumped in the area of Backbone.js and its best friend marionette. They are kind of "Event Driven" as far as I understand, which turn object having receiving message function. They are surly a brilliant set. But I think they are still too flexible in terms of coding style. That is why I came up with a simple idea: "Create a object group to bridge other objects.")</p>

<h1>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Documentation</h1>

<h3>
<a id="take-a-look-at-basic-code" class="anchor" href="#take-a-look-at-basic-code" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Take a look at basic code</h3>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> obj <span class="pl-k">=</span> {
    <span class="pl-en">create</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">name</span>){
        <span class="pl-k">var</span> newObj <span class="pl-k">=</span> <span class="pl-c1">Object</span>.<span class="pl-en">create</span>(<span class="pl-v">this</span>);
        <span class="pl-k">if</span> (<span class="pl-k">!</span>name <span class="pl-k">&amp;&amp;</span> <span class="pl-v">this</span>.<span class="pl-en">hasOwnProperty</span>(<span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span>)) {
            name <span class="pl-k">=</span> <span class="pl-v">this</span>.<span class="pl-c1">name</span>; <span class="pl-c">//name from originate during instance</span>
        }
        <span class="pl-smi">newObj</span>.<span class="pl-c1">name</span> <span class="pl-k">=</span> name;
        <span class="pl-k">return</span> newObj;
    },
    <span class="pl-en">extend</span><span class="pl-k">:</span> <span class="pl-k">function</span>() {
        <span class="pl-k">for</span>(<span class="pl-k">var</span> i<span class="pl-k">=</span><span class="pl-c1">0</span>; i<span class="pl-k">&lt;</span><span class="pl-v">arguments</span>.<span class="pl-c1">length</span>; i<span class="pl-k">++</span>)
            <span class="pl-k">var</span> extObj <span class="pl-k">=</span> <span class="pl-v">arguments</span>[i];
            <span class="pl-k">for</span>(<span class="pl-k">var</span> key <span class="pl-k">in</span> extObj)
                <span class="pl-v">this</span>[key] <span class="pl-k">=</span> extObj[key];
    },
    <span class="pl-en">command</span><span class="pl-k">:</span> <span class="pl-k">function</span>() {
        <span class="pl-k">var</span> self <span class="pl-k">=</span> <span class="pl-v">this</span>;
        <span class="pl-k">return</span> <span class="pl-k">function</span>(<span class="pl-smi">cmd</span>, <span class="pl-smi">opt</span>) {
            <span class="pl-k">return</span> self[cmd](opt);
        };
    },
    <span class="pl-en">thisObj</span><span class="pl-k">:</span> <span class="pl-k">function</span>() { <span class="pl-c">//for debug</span>
        <span class="pl-k">return</span> <span class="pl-v">this</span>;
    },
};

<span class="pl-k">var</span> group <span class="pl-k">=</span> <span class="pl-smi">obj</span>.<span class="pl-en">create</span>(<span class="pl-s"><span class="pl-pds">'</span>group<span class="pl-pds">'</span></span>);
<span class="pl-smi">group</span>.<span class="pl-en">extend</span>({
    <span class="pl-en">create</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">name</span>) {
        <span class="pl-k">var</span> newObj <span class="pl-k">=</span> <span class="pl-smi">obj</span>.<span class="pl-smi">create</span>.<span class="pl-c1">apply</span>(<span class="pl-v">this</span>, <span class="pl-v">arguments</span>);
        <span class="pl-c">//all members should recreated within new group</span>
        <span class="pl-smi">newObj</span>.<span class="pl-en">_buildMemberList</span>();

        <span class="pl-k">return</span> newObj;
    },
    <span class="pl-en">_buildMemberList</span><span class="pl-k">:</span> <span class="pl-k">function</span>() {
        <span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-v">this</span>.<span class="pl-smi">_memberList</span>){ <span class="pl-c">//base group</span>
            <span class="pl-v">this</span>.<span class="pl-smi">_memberList</span> <span class="pl-k">=</span> {};
        }
        <span class="pl-k">else</span> <span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-v">this</span>.<span class="pl-en">hasOwnProperty</span>(<span class="pl-s"><span class="pl-pds">'</span>_memberList<span class="pl-pds">'</span></span>)) { <span class="pl-c">//inherited group</span>
            <span class="pl-k">var</span> prototypeMemberList <span class="pl-k">=</span> <span class="pl-v">this</span>.<span class="pl-smi">_memberList</span>;
            <span class="pl-v">this</span>.<span class="pl-smi">_memberList</span> <span class="pl-k">=</span> {}; <span class="pl-c">//in object level memberList</span>
            <span class="pl-k">for</span> (<span class="pl-k">var</span> key <span class="pl-k">in</span> prototypeMemberList) {
                <span class="pl-k">var</span> memberCmd <span class="pl-k">=</span> prototypeMemberList[key];
                <span class="pl-k">var</span> newMember <span class="pl-k">=</span> <span class="pl-en">memberCmd</span>(<span class="pl-s"><span class="pl-pds">'</span>create<span class="pl-pds">'</span></span>);
                <span class="pl-smi">newMember</span>.<span class="pl-smi">group</span> <span class="pl-k">=</span> <span class="pl-v">this</span>; <span class="pl-c">//member</span>

                <span class="pl-v">this</span>.<span class="pl-smi">_memberList</span>[key] <span class="pl-k">=</span> <span class="pl-smi">newMember</span>.<span class="pl-en">command</span>();
            }
        }
    },
    <span class="pl-en">join</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">member</span>) {
        <span class="pl-c">//add new member in command interface</span>
        <span class="pl-k">var</span> newMember <span class="pl-k">=</span> <span class="pl-smi">member</span>.<span class="pl-en">create</span>(<span class="pl-smi">member</span>.<span class="pl-c1">name</span>);
        <span class="pl-smi">newMember</span>.<span class="pl-smi">group</span> <span class="pl-k">=</span> <span class="pl-v">this</span>;
        <span class="pl-v">this</span>.<span class="pl-smi">_memberList</span>[<span class="pl-smi">member</span>.<span class="pl-c1">name</span>] <span class="pl-k">=</span> <span class="pl-smi">newMember</span>.<span class="pl-en">command</span>();
    },
    <span class="pl-en">call</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">memberName</span>, <span class="pl-smi">methodName</span>, <span class="pl-smi">opt</span>) {
        <span class="pl-k">var</span> memberCmd <span class="pl-k">=</span> <span class="pl-v">this</span>.<span class="pl-smi">_memberList</span>[memberName];
        <span class="pl-k">return</span> <span class="pl-en">memberCmd</span>(methodName, opt);
    },
});</pre></div>

<h2>
<a id="usages" class="anchor" href="#usages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usages</h2>

<h4>
<a id="object-inheritance" class="anchor" href="#object-inheritance" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Object Inheritance</h4>

<ul>
<li>
<p><code>obj.create(&lt;object name&gt;)</code> - Create a new object.  should be identifier of an object. </p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> newObj <span class="pl-k">=</span> <span class="pl-smi">Grp</span>.<span class="pl-smi">obj</span>.<span class="pl-en">create</span>(<span class="pl-s"><span class="pl-pds">'</span>newObj<span class="pl-pds">'</span></span>);
<span class="pl-k">var</span> newObj_1 <span class="pl-k">=</span> <span class="pl-smi">newObj</span>.<span class="pl-en">create</span>(<span class="pl-s"><span class="pl-pds">'</span>newObj_1<span class="pl-pds">'</span></span>);</pre></div>
</li>
<li>
<p><code>obj.extend( obj1 [, obj2, ......] )</code> - extend object's attributes. If attribute exists, it will be overriden.    </p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> newObj <span class="pl-k">=</span> <span class="pl-smi">Grp</span>.<span class="pl-smi">obj</span>.<span class="pl-en">create</span>(<span class="pl-s"><span class="pl-pds">'</span>newObj<span class="pl-pds">'</span></span>);
<span class="pl-smi">newObj</span>.<span class="pl-en">extend</span>({
    <span class="pl-en">newAttribute</span><span class="pl-k">:</span> <span class="pl-k">function</span>() {
    <span class="pl-en">alert</span>(<span class="pl-s"><span class="pl-pds">'</span>this is a new attribute<span class="pl-pds">'</span></span>);
    },
});</pre></div>
</li>
<li>
<p><code>obj.command()</code> - return a function which provides simple and restricted interface.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> newObj <span class="pl-k">=</span> <span class="pl-smi">Grp</span>.<span class="pl-smi">obj</span>.<span class="pl-en">create</span>(<span class="pl-s"><span class="pl-pds">'</span>newObj<span class="pl-pds">'</span></span>);
<span class="pl-smi">newObj</span>.<span class="pl-en">extend</span>({
    <span class="pl-en">newAttribute</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">opt</span>) {
        <span class="pl-en">alert</span>(<span class="pl-s"><span class="pl-pds">'</span>this is a new attribute for <span class="pl-pds">'</span></span> <span class="pl-k">+</span> <span class="pl-smi">opt</span>.<span class="pl-c1">name</span><span class="pl-k">||</span><span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>);
    },
});

<span class="pl-k">var</span> newObjCmd <span class="pl-k">=</span> <span class="pl-smi">newObj</span>.<span class="pl-en">command</span>();
<span class="pl-en">newObjCmd</span>(<span class="pl-s"><span class="pl-pds">'</span>newAttribute<span class="pl-pds">'</span></span>, { name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>george<span class="pl-pds">'</span></span> }); <span class="pl-c">//calling the object</span></pre></div>
</li>
<li>
<p><code>obj.thisObj</code> - for debug purpose, you may want to access object itself. There is an attribute "thisObj" to return object itself.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-en">newObjCmd</span>(<span class="pl-s"><span class="pl-pds">'</span>thisObj<span class="pl-pds">'</span></span>); <span class="pl-c">//return newObj</span></pre></div>
</li>
<li><p><code>obj.parentNames</code> - Array to keep all inherited object's name.</p></li>
</ul>

<h4>
<a id="group" class="anchor" href="#group" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Group</h4>

<ul>
<li>
<p><code>group.join(&lt;member or sub-Group&gt;[, &lt;member2 or sub-Group2&gt;...])</code> - join a memeber into this group. If member name exists, the member will be overriden.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-c">//create a member</span>
<span class="pl-k">var</span> newObj <span class="pl-k">=</span> <span class="pl-smi">Grp</span>.<span class="pl-smi">obj</span>.<span class="pl-en">create</span>(<span class="pl-s"><span class="pl-pds">'</span>newObj<span class="pl-pds">'</span></span>);
<span class="pl-smi">newObj</span>.<span class="pl-en">extend</span>({
    <span class="pl-en">newAttribute</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">opt</span>) {
        <span class="pl-en">alert</span>(<span class="pl-s"><span class="pl-pds">'</span>this is a new attribute for <span class="pl-pds">'</span></span> <span class="pl-k">+</span> <span class="pl-smi">opt</span>.<span class="pl-c1">name</span><span class="pl-k">||</span><span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>);
    },
});

<span class="pl-c">//create a group</span>
<span class="pl-k">var</span> newGrp <span class="pl-k">=</span> <span class="pl-smi">Grp</span>.<span class="pl-smi">group</span>.<span class="pl-en">create</span>(<span class="pl-s"><span class="pl-pds">'</span>newGrp<span class="pl-pds">'</span></span>);
<span class="pl-smi">newGrp</span>.<span class="pl-c1">join</span>(newObj);
<span class="pl-smi">newGrp</span>.<span class="pl-en">extend</span>({
    <span class="pl-en">promptAlert</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">opt</span>) {
        <span class="pl-v">this</span>.<span class="pl-c1">call</span>(<span class="pl-s"><span class="pl-pds">'</span>newObj<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>newAttribute<span class="pl-pds">'</span></span>, opt );
    },
});

<span class="pl-k">var</span> grpTest <span class="pl-k">=</span> <span class="pl-smi">newGrp</span>.<span class="pl-en">create</span>(<span class="pl-s"><span class="pl-pds">'</span>grpTest<span class="pl-pds">'</span></span>).<span class="pl-en">command</span>();
<span class="pl-k">var</span> opt <span class="pl-k">=</span> { name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>grpTest_Name<span class="pl-pds">'</span></span> };
<span class="pl-en">grpTest</span>(<span class="pl-s"><span class="pl-pds">'</span>promptAlert<span class="pl-pds">'</span></span>, opt);</pre></div>
</li>
<li>
<p><code>group.call()</code>  - call its own member command. If inherited, the member will still be called based on parents list. return its result or the last call's result.</p>

<ul>
<li>For group level, <code>this.call(&lt;memberName&gt;, &lt;memberAttribute&gt;, opt)</code> </li>
<li>For member level, <code>this.group.call(&lt;memberName&gt;, &lt;memberAttribute&gt;, opt)</code>
</li>
</ul>
</li>
<li>
<p><code>group.upCall()</code>  - call its own member command or find in upper group's member command.  First hit will be return.!!!</p>

<ul>
<li>For group level, <code>this.upCall(&lt;memberName&gt;, &lt;memberAttribute&gt;, opt)</code> </li>
<li>For member level, <code>this.group.upCall(&lt;memberName&gt;, &lt;memberAttribute&gt;, opt)</code>
</li>
</ul>
</li>
<li>
<p><code>group.downCall()</code>  - call its own member command or find in sub group's member command. First hit will be return.!!!</p>

<ul>
<li>For group level, <code>this.downCall(&lt;memberName&gt;, &lt;memberAttribute&gt;, opt)</code> </li>
<li>For member level, <code>this.group.downCall(&lt;memberName&gt;, &lt;memberAttribute&gt;, opt)</code>
</li>
</ul>
</li>
<li><p><code>group.group</code> - for member, it refers to its group; for group, refers to its parent group.  </p></li>
<li>
<p><code>group.setCallToMember(&lt;memberName&gt;, [&lt;methodName&gt;])</code>  - a convenient way to port all functions/single method of a specific member to group level</p>

<ul>
<li> is optional.</li>
</ul>
</li>
<li><p><code>group.members()</code> - show a map of this group's members. This is to be used in <code>group.override(newMember, memberMap)</code> .</p></li>
<li><p><code>group.getMember(memberName[, memberMap])</code> - get a member by name.</p></li>
<li><p><code>group.override(newMember[, memberMap])</code> - override a member in this group. This function will go deep to each level and replace the member with the same name. If memberMap is specified, only the specified path will be search for overridden. </p></li>
<li><p>Case 1:  A group is instantial, its members will be instantial. At the meantime, if the group setCallToMember. It should set as well.</p></li>
</ul>

<h2>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Examples</h2>

<ol>
<li><a href="test/specs/global/globalSpec.js">Check the test cases and you might get some idea</a></li>
<li><a href="examples/">Check example folder</a></li>
<li>
<p>In node.js
npm install groupjs</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> Grp <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>groupjs<span class="pl-pds">'</span></span>); </pre></div>
</li>
<li>with requirejs
require(['groupjs'], function(Grp){});</li>
</ol>

<h2>
<a id="build" class="anchor" href="#build" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Build</h2>

<pre><code>grunt
</code></pre>

<h2>
<a id="release" class="anchor" href="#release" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Release</h2>

<pre><code>To npm, change version number
npm publish ./

Register in bower
bower register groupjs git://github.com/mainnote/groupJS.git

Change version in bower, 
git tag -a 0.0.27 -m "Tagging 0.0.27"
</code></pre>

<h2>
<a id="test" class="anchor" href="#test" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Test</h2>

<pre><code>grunt test
or
grunt watch
</code></pre>

<h2>
<a id="contributors" class="anchor" href="#contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributors</h2>

<p>George Zhang &lt; <a href="mailto:service@mainnote.com">service@mainnote.com</a> &gt;</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/mainnote/groupJS">Groupjs</a> is maintained by <a href="https://github.com/mainnote">mainnote</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
