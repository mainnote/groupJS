/*! groupjs 2016-06-01 */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.Grp=b()}):"object"==typeof exports?module.exports=b():a.Grp=b()}(this,function(){function a(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1}function b(a){if("_callToMembers"in a){for(var b=[],c=0,d=a._callToMembers.length;d>c;c++)b[c]=a._callToMembers[c];for(var c=0,d=b.length;d>c;c++){var e=b[c];a.setCallToMember(e.memberName,e.methodName)}return!0}return!1}var c="groupjs";"undefined"!=typeof window&&window&&(global=window),Object.create||(Object.create=function(a){function b(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return b.prototype=a,new b}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),"undefined"==typeof Array.isArray&&(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var d={create:function(a){var b=Object.create(this);if(this.hasOwnProperty("parentNames")){b.parentNames=[];for(var c=this.parentNames.length,d=0;c>d;d++)b.parentNames.push(this.parentNames[d])}return this.hasOwnProperty("name")&&(b.hasOwnProperty("parentNames")||(b.parentNames=[]),b.parentNames.push(this.name),a||(a=this.name)),b.name=a,"init"in b&&"function"==typeof b.init&&b.init(),b},extend:function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];for(var c in b)this[c]=b[c],"init"===c&&"function"==typeof this.init&&this.init()}return this},command:function(){var a=this;return function(b,d){if(!(b in a))throw"This object "+a.name+" does not have key "+b;if("function"==typeof a[b]){if(global.LOG){var e=a[b](d);return a.isReservedAttr(b)||LOG(c," Method "+a.name+"."+b+" ",d,e),e}return a[b](d)}if(global.LOG){var e=a[b];return a.isReservedAttr(b)||LOG(c," Attribute "+a.name+"."+b+" ","",e),e}return a[b]}},thisObj:function(){return this},isReservedAttr:function(b){return b in d||b in e||a(["parentNames","group","_memberList","name","_callToMembers"],b)||this.reservedAttr&&Array.isArray(this.reservedAttr)&&a(this.reservedAttr,b)?!0:!1}},e=d.create("group");e.extend({create:function(a){var c=d.create.apply(this,arguments);return c._buildMemberList(),b(c),c},_buildMemberList:function(){if(this._memberList){if(!this.hasOwnProperty("_memberList")){var a=this._memberList;this._memberList={};for(var b in a){var c=a[b],d=c("create");d.group=this,this._memberList[b]=d.command()}}}else this._memberList={}},join:function(){for(var a=0;a<arguments.length;a++){var b=arguments[a],c=b.create(b.name);c.group=this,this._memberList[b.name]=c.command()}return this},call:function(a,b,d){var e=!1;if(a in this._memberList){e=!0;var f=this._memberList[a];if(global.LOG){var g=f(b,d);return LOG(c," Group "+this.name+" [ "+a+"."+b+" ] ",d,g),g}return f(b,d)}var g,h=this._memberList;for(var i in h){var f=h[i];if("function"==typeof f){var j=h[i]("thisObj");if(j.hasOwnProperty("parentNames")&&b in j&&"function"==typeof j[b])for(var k=j.parentNames,l=k.length,m=0;l>m;m++)if(a===k[m]){e=!0;var g=f(b,d);global.LOG&&LOG(c," SubGroup "+this.name+" [ "+a+"."+b+" ] ",d,g)}}}if(e)return g;if(!e)throw"This group "+this.name+" does not have member "+a},upCall:function(a,b,c){var d=this._upCall(a,b,c);if("string"==typeof d&&"__NOTFOUND__"===d)throw"The upper groups from "+this.name+" does not have member "+a;return d},_upCall:function(a,b,c){return a in this._memberList?this.call(a,b,c):this.group?this.group.upCall(a,b,c):"__NOTFOUND__"},downCall:function(a,b,c){var d=this._downCall(a,b,c);if("string"==typeof d&&"__NOTFOUND__"===d)throw"The downward groups from "+this.name+" does not have member "+a;return d},_downCall:function(a,b,c){if(a in this._memberList)return this.call(a,b,c);var d=this._memberList;for(var e in d){var f=d[e];if("function"==typeof f){var g=d[e]("thisObj");if(g.hasOwnProperty("_memberList"))return g._downCall(a,b,c)}}return"__NOTFOUND__"},setCallToMember:function(a,b){function c(a,b,c){for(var d=0;d<a.length;d++)if(a[d].memberName==b&&a[d].methodName==c)return!0;return!1}function d(a,b){e.isReservedAttr(a)||("function"!=typeof b[a]||b[a].binded?e[a]=b[a]:(e[a]=b[a].bind(b),e[a].binded=!0))}var e=this,f=this.call(a,"thisObj");if(f)if(this.hasOwnProperty("_callToMembers")||(this._callToMembers=[]),c(this._callToMembers,a,b)||this._callToMembers.push({memberName:a,methodName:b}),b)d(b,f);else for(var g in f)d(g,f);return this},members:function(){function a(b){var c=b._memberList,d=[];for(var e in c){var f={name:e},g=c[e]("thisObj");g.hasOwnProperty("_memberList")&&(f.members=a(g)),d.push(f)}return d}return a(this)},getMember:function(a,b){function c(a,b){if(Array.isArray(a)&&b&&b.hasOwnProperty("_memberList"))for(var e=a.length,f=0;e>f;f++){if(!a[f].hasOwnProperty("members"))return d(b);var g=c(a[f].members,b.call(a[f].name,"thisObj"));if(g)return g}return null}function d(b){var c=b._memberList;if(a in c)return c[a]("thisObj");for(var e in c){var f=c[e]("thisObj");if(f.hasOwnProperty("_memberList")){var g=d(f);if(g)return g}}return null}return b&&Array.isArray(b)?c(b,this):d(this)},override:function(a,c,d){function e(a,b){if(Array.isArray(a)&&b&&b.hasOwnProperty("_memberList"))for(var c=a.length,d=0;c>d;d++)a[d].hasOwnProperty("members")?e(a[d].members,b.call(a[d].name,"thisObj")):f(b)}function f(c){var d=!1;if(c.hasOwnProperty("_memberList"))for(var e in c._memberList){var g=c._memberList[e]("thisObj");g.name===a.name?(c.join(a),d=b(c)):g.hasOwnProperty("_memberList")&&f(g)&&(d=b(c))}return d}return a&&(c&&Array.isArray(c)?e(c,this):f(this)),this}});var f={obj:d,group:e};return f});