/*! groupjs 2015-12-18 */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.Grp=b()}):"object"==typeof exports?module.exports=b():a.Grp=b()}(this,function(){function a(a){return a in c||a in d||"parentNames"===a||"group"===a||"_memberList"===a||"name"===a||"_callToMembers"===a?!0:!1}var b="groupjs";Object.create||(Object.create=function(a){function b(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return b.prototype=a,new b}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),"undefined"==typeof Array.isArray&&(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var c={create:function(a){var b=Object.create(this);if(this.hasOwnProperty("parentNames")){b.parentNames=[];for(var c=this.parentNames.length,d=0;c>d;d++)b.parentNames.push(this.parentNames[d])}return this.hasOwnProperty("name")&&(b.hasOwnProperty("parentNames")||(b.parentNames=[]),b.parentNames.push(this.name),a||(a=this.name)),b.name=a,b},extend:function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];for(var c in b)this[c]=b[c]}},command:function(){var c=this;return function(d,e){if("function"==typeof c[d]){if(window.LOG){var f=c[d](e);return a(d)||LOG(b,c.name+" -> "+d,e,f),f}return c[d](e)}if(window.LOG){var f=c[d];return a(d)||LOG(b,c.name+"."+d,"",f),f}return c[d]}},thisObj:function(){return this}},d=c.create("group");d.extend({create:function(a){var b=c.create.apply(this,arguments);return b._buildMemberList(),b},_buildMemberList:function(){if(this._memberList){if(!this.hasOwnProperty("_memberList")){var a=this._memberList;this._memberList={};for(var b in a){var c=a[b],d=c("create");d.group=this,this._memberList[b]=d.command()}}}else this._memberList={}},join:function(){for(var a=0;a<arguments.length;a++){var b=arguments[a],c=b.create(b.name);c.group=this,this._memberList[b.name]=c.command()}},call:function(a,c,d){var e;if(a in this._memberList){if(e=this._memberList[a],window.LOG){var f=e(c,d);return LOG(b,this.name+" => "+a,d,f),f}return e(c,d)}var g=this._memberList;for(var h in g){var e=g[h];if("function"==typeof e){var i=g[h]("thisObj");if(i.hasOwnProperty("parentNames"))for(var j=i.parentNames,k=j.length,l=0;k>l;l++)if(a===j[l])if(window.LOG){var f=e(c,d);LOG(b,this.name+" => "+a,d,f)}else e(c,d)}}},setCallToMember:function(b,c){function d(b,c){a(b)||("function"!=typeof c[b]||c[b].binded?e[b]=c[b]:(e[b]=c[b].bind(c),e[b].binded=!0))}var e=this,f=this.call(b,"thisObj");if(f)if(this._callToMembers||(this._callToMembers=[]),this._callToMembers.push({name:b,method:c}),c)d(c,f);else for(var g in f)d(g,f)},members:function(){function a(b){var c=b._memberList,d=[];for(var e in c){var f={name:e},g=c[e]("thisObj");g.hasOwnProperty("_memberList")&&(f.members=a(g)),d.push(f)}return d}return a(this)},getMember:function(a,b){function c(a,b){if(Array.isArray(a)&&b&&b.hasOwnProperty("_memberList"))for(var e=a.length,f=0;e>f;f++){if(!a[f].hasOwnProperty("members"))return d(b);var g=c(a[f].members,b.call(a[f].name,"thisObj"));if(g)return g}return null}function d(b){var c=b._memberList;if(a in c)return c[a]("thisObj");for(var e in c){var f=c[e]("thisObj");if(f.hasOwnProperty("_memberList"))return d(f)}return null}return b&&Array.isArray(b)?c(b,this):d(this)},override:function(a,b){function c(a,b){if(Array.isArray(a)&&b&&b.hasOwnProperty("_memberList"))for(var e=a.length,f=0;e>f;f++)a[f].hasOwnProperty("members")?c(a[f].members,b.call(a[f].name,"thisObj")):d(b)}function d(b){function c(a){if("_callToMembers"in a){for(var b=a._callToMembers.length,c=0;b>c;c++){var d=a._callToMembers[c];a.setCallToMember(d.name,d.method)}return!0}return!1}var e=!1;if(b.hasOwnProperty("_memberList"))for(var f in b._memberList){var g=b._memberList[f]("thisObj");g.name===a.name?(b.join(a),e=c(b)):g.hasOwnProperty("_memberList")&&d(g)&&(e=c(b))}return e}a&&(b&&Array.isArray(b)?c(b,this):d(this))}});var e={obj:c,group:d};return e});